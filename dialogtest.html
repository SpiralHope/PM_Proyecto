<!DOCTYPE html>
<html lang="en">
<head>
	<title></title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Bootstrap core CSS-->
  <link href="vendor/nifty-modal/nifty.css" rel="stylesheet">

  <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
  <!-- Custom fonts for this template-->
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <!-- Page level plugin CSS-->
  <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

  <link href="vendor/FullCalendar/fullcalendar.css" rel="stylesheet">


  <!-- Custom styles for this template-->
  <link href="css/sb-admin.css" rel="stylesheet">
  <link href="vendor/jquery-modal/jquery.modal.min.css" rel="stylesheet">
  <link href="vendor/jquery-timepicker/jquery.timepicker.css" rel="stylesheet">



  <style type="text/css">
    .modal{
    }

    .md-content{
      margin: -15px -30px;
    }


    .msgModal{
      width: initial;
      max-width: initial;
    }

    .cursoForm{
      width: 600px;
      height: 350px;
      position: relative;
      overflow-x: hidden;
    }
    
    #slideContainer{
      width: 1800px;
      height: 100%;

      position: absolute;
      top: 0px;
      left: 0px;
      overflow: hidden;

    }

    .slideCurso{
      width: 600px;
      height: 100%;
      display: inline-block;
      padding: 5px;
      margin: 0px;
    }

    #slide1{
      position: absolute;
      top: 0px;
      left: 0px;
    }

    #slide2{
      position: absolute;
      top: 0px;
      left: 600px;
    }

    #slide3{
      position: absolute;
      top: 0px;
      left: 1200px;
    }

    .modal{
      max-width: 680px;
    }

    #descCurso{
      height: 120px;
       resize: none;
    }

    input{
    transition: color 1.0s  ease-out;
    color: #6c757d !important;

    }
    .has-error input{
        transition: color 1.0s  ease-out;
        color: #de4444 !important;
    }

    input{
    transition: color 1.0s  ease-out;
    color: #6c757d !important;

    }
    .has-error input{
        transition: color 1.0s  ease-out;
        color: #de4444 !important;
    }

    textarea{
      transition: color 1.0s  ease-out;
      color: #6c757d !important;
    }
    .has-error textarea{
        transition: color 1.0s  ease-out;
        color: #de4444 !important;
    }

    .with-errors{
      padding-left: 30px; 
      color: #de4444 !important;
    }

    .md-content > div ul {
      padding: 0px;
    }

    .form-control::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
      color: #ccc;
      opacity: 1; /* Firefox */
    }

    .form-control:-ms-input-placeholder { /* Internet Explorer 10-11 */
      color: #ccc;
    }

    .form-control::-ms-input-placeholder { /* Microsoft Edge */
      color: #ccc;
    }

    .has-error .form-control {
        border-color: #a94442;
        -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
    }

    .has-error .form-control:focus {
        border-color: #843534;
        -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483;
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25)  #ce8483;;
    }

    .selector-curso{
      /*padding-left: 10px;
      padding-right: 10px;
*/
      display: block;
      padding: 0.375rem 0.75rem;
      font-size: 1rem;
      line-height: 1.5;
      color: #495057;
      background-color: #fff;
      background-clip: padding-box;
      border: 1px solid #ced4da;
      border-radius: 0.25rem;
      border-top-left-radius: 0rem;
      border-bottom-left-radius: 0rem;
    }

    .picture-curso-sala{
      width: 130px;
      height: 130px;
    }

    .cupo-curso{
      background-color: #fff;
      border: solid #eee 1px;
      padding: 1px;
      padding-left: 14px;
      border-radius: 5px;
    }

    .divider-curso{
      border: #eee 1px solid;
      margin-bottom: 18px;
    }

    .curso-ubi-text{
      font-size: 12px;
    }


  </style>
</head>
<body>

  

	<div id="mainModal" class="modal ">
    

    <div class="md-content">
        <div class='md-title'  >
          <h3 id="cursoTitle" >Curso Nuevo/Nombre</h3>
        </div>
        <div class='md-body'>
          <div class="container-fluid">
              <div class="row">
                <div class="col-md-12">
                </div>
              </div>
          </div>
          
          <div class="bodyCursoSlider">
            <div class="cursoForm">

              <div id="slideContainer">


                <div class="slideCurso" id="slide1">
                  <form id="slide1Form" role="form" data-toggle="validator">
                    <div class="form-group">
                      <label for="nombreCurso">Nombre del curso:</label>
                      <input type="text" class="form-control" id="nombreCurso" name="nombreCurso" data-error="Requerido" data-maxlength="255" autocomplete="off"  placeholder="Ingrese el nombre" required tabindex="-1">
                      <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group">
                      <label for="descCurso">Descripcion</label>
                      <textarea type="text" class="form-control" id="descCurso" name="descCurso" data-maxlength="255" data-error="Requerido" autocomplete="off" placeholder="max 255" required tabindex="-1"></textarea>
                      <div class="help-block with-errors"></div>
                    </div>
                  </form>
                </div>  


                <div class="slideCurso" id="slide2">
                  <h6>Introduzca horario del curso:</h6>
                  <form id="slide2Form" role="form" data-toggle="validator">
                    <div class="row">
                      <div class="form-group col-md-6">
                        <label for="horaIni"> Hora Inicio</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="horaIni" name="horaIni" autocomplete="off" required tabindex="-1">
                          <a href="#" class="input-group-addon selector-curso" id="showHoraIni" tabindex="-1">v</a>
                        </div>
                      </div>
                      <div class="form-group col-md-6">
                        <label for="horaFin"> Hora Final</label>
                        <div class="input-group">
                          <input type="text" class="form-control" id="horaFin" name="horaFin" autocomplete="off" required tabindex="-1">
                          <a href="#" class="input-group-addon selector-curso" id="showHoraFin" tabindex="-1">v</a>
                        </div>
                      </div>
                    </div>
                    <div class="divider-curso"></div>
                    <div class="row" id="sala-detalle">
                      <div class="col-md-4">
                        <div class="col-md-12">
                          <img id="img-sala" src="img/placeholder.png" class="picture-curso-sala img-thumbnail">
                        </div>
                        <div class="col-md-6">
                          <div class="cupo-curso">
                            <i class="fa fa-user" aria-hidden="true"></i><span id="cupo-sala">--</span>
                          </div>
                        </div>
                      </div>
                      <div class="form-group col-md-8">
                        <div class="col-md-12">
                          <label for="sala">Salas Disponibles</label>
                          <select id="sala" name="sala" autocomplete="off" required tabindex="-1">
                            <option disabled selected value> -- Seleccione una opcion -- </option>

                          </select>
                        </div>
                        <div class="col-md-12">
                          <p>Ubicacion</p>
                          <p id="ubi-sala" class="curso-ubi-text text-muted"></p>
                        </div>
                      </div>
                    </div>


                  </form>
                </div>

                  
                <div class="slideCurso" id="slide3">
                  <form id="slide3Form">
                    <div class="form-group">
                      <label for="instructor">Instructores </label>
                      <select id="instructor" name="instructor" autocomplete="off" required tabindex="-1">
                        <option disabled selected value> -- Seleccione una opcion -- </option>
                      </select>
                    </div>
                    <div class="row">
                      <div class="col-md-4">
                          <img id="img-instructor" src="img/placeholder.png" class="picture-curso-sala img-thumbnail">
                      </div>
                      <div class="col-md-8">
                        <p>Descripcion</p>
                        <p id="desc-instructor" class="curso-desc-text text-muted"></p>
                      </div>                      
                    </div>
                  </form>
                </div>


              </div>
            </div>
          </div>
         
          <div class="btn-group">
            <button class="btn btn-danger button1"  >Cancelar</button>
            <button class="btn btn-primary button2" >Anterior</button>
            <button class="btn btn-danger button3"  >Siguiente</button>
          </div>

        </div>
      </div>
	</div>

  <div id="messageModal" class="modal msgModal">
    <p id="msgText"></p>
    <button class="btn btn-danger button1"  >Cerrar</button>
  </div>

	<!-- Link to open the modal -->
	<p><a id='openMainModal' href="#" >Open Modal</a></p>


	<!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Moment and FullCalendar Plugins -->

    <script src="vendor/moment/moment.js"></script>
    <script src='vendor/jquery-modal/jquery.modal.js'></script>
    <script src="vendor/validator/validator.js"></script>
    <script src="vendor/jquery-timepicker/jquery.timepicker.js"></script>



    <script type="text/javascript">


      $('#horaIni').timepicker({ 'step': 15, 'timeFormat': 'h:i A', 'minTime': '8:00am', 'maxTime': '11:30pm', 'disableTextInput': true});
      $('#horaFin').timepicker({ 'step': 15, 'timeFormat': 'h:i A', 'minTime': '8:00am', 'maxTime': '11:30pm', 'disableTextInput': true});

      $('#showHoraIni').on('click', function(e){
        e.preventDefault();
        $('#horaIni').timepicker('show');
      });

      $('#showHoraFin').on('click', function(e){
        e.preventDefault();
        $('#horaFin').timepicker('show');
      });


      

      $('#horaIni').change(function(event) {
        //alert('cambio');
      });

      var mainSel = '#mainModal';
      var btn1Sel = ' .button1';
      var btn2Sel = ' .button2';
      var btn3Sel = ' .button3';


      var mesgSel = '#messageModal';
      var msgText = '#msgText';


      
      var event1Button = function(){
        $.modal.close();
      }

      var openMsgModal = function(msg){

        if(msg){
          $(msgText).html(msg);
        }

        $(mesgSel).modal({
          escapeClose: false,
          clickClose: false,
          exishowClose: false,
          closeExisting: false,
        });
      }

      var formularioCurso = function(){
        var self = this;
        self.slideActual = 1;
        self.slideTotales = 3;

        self.container = '#slideContainer';

        self.title = '#cursoTitle';
        
        self.afterAnim = function(){
            $(mainSel + btn1Sel).prop('disabled', false);
            $(mainSel + btn3Sel).prop('disabled', false);
            $(mainSel + btn3Sel).html('Siguiente');
          if(self.slideActual > 1){
            $(mainSel + btn2Sel).prop('disabled', false);
          }
          if(self.slideActual == 1 ){
            $(self.title).html('Crear Curso/Nombre');
          }
          if(self.slideActual == 2 ){
            $(self.title).html('Crear Curso/Sala');
          }

          if(self.slideActual == 3 ){
            $(self.title).html('Crear Curso/Instructor');
            $(mainSel + btn3Sel).html('Crear');
          }

        }

        self.nextSlide = function(){


          if( $('#slide'+ self.slideActual +'Form').validator('validate').has('.has-error').length > 0){
            openMsgModal('Llene todos los campos!!!');
            return;
          }


          if(self.slideActual == 2){
            var timeIni = moment($('#horaIni').val(),"hh:mm A", true);
            var timeFin = moment($('#horaFin').val(),"hh:mm A", true); 
            if(!timeIni.isValid() || !timeFin.isValid() ){
              openMsgModal('Introduzca tiempos validos');
              return;
            }else if(timeFin.isBefore(timeIni)){
              $('#horaIni').val(timeFin.format('hh:mm A'));
              $('#horaFin').val(timeIni.format('hh:mm A'));
            }
          }

          if(self.slideActual < self.slideTotales){
            self.slideActual ++;
            $(mainSel + btn1Sel).prop('disabled', true);
            $(mainSel + btn2Sel).prop('disabled', true);
            $(mainSel + btn3Sel).prop('disabled', true);

            $(self.container).animate({left: "-=600px", }, 200, self.afterAnim); 
          }
        }

        self.prevSlide = function(){
          if(self.slideActual > 1){
            self.slideActual --;
            $(mainSel + btn1Sel).prop('disabled', true);
            $(mainSel + btn2Sel).prop('disabled', true);
            $(mainSel + btn3Sel).prop('disabled', true);

            $(self.container).animate({left: "+=600px", }, 200, self.afterAnim);
          }
        }

      

        self.crearCurso = function(){

        }

        self.closeCurso = function(){
          event1Button();
        }

        self.init = function(){


          $(mainSel + btn1Sel).click(function(e) {
            e.preventDefault();
             self.closeCurso();
          });

          $(mainSel + btn2Sel).click(function(e) {
              e.preventDefault();
              self.prevSlide();
          });

          $(mainSel + btn3Sel).click(function(e) {
              e.preventDefault();
              self.nextSlide();
          });

           $('#sala-detalle').slideUp('fast', function() {
              
          });

 
          $('#horaIni, #horaFin').on('changeTime', function(event) {
            var timeIni = moment($('#horaIni').val(),"hh:mm A", true);
            var timeFin = moment($('#horaFin').val(),"hh:mm A", true); 
            if(!timeIni.isValid() || !timeFin.isValid() ){
              return;
            }else if(timeFin.isBefore(timeIni)){
              $('#horaFin').val(timeIni.format('hh:mm A'));
              $('#horaIni').val(timeFin.format('hh:mm A')); 

            }/* Act on the event */

            $('#sala-detalle').slideDown('slow', function() {
              
            });


          });

           self.reset();



        }

        self.reset  = function(){
          $(mainSel + btn2Sel).prop('disabled', true);

          $(self.container).animate({left: "=0px", }, 0, self.afterAnim) 
        }

      }

      var FormCur = new formularioCurso();
      FormCur.init();

    	$(document).ready(function($) {
        $('#openMainModal').on('click', function(e){
            e.preventDefault();

            FormCur.reset(); 
            $(mainSel).modal({
              escapeClose: false,
              clickClose: false,
              exishowClose: false,
              showClose: false 
            });
        })

        /*
          $(mainSel + btn1Sel).click(function(e) {
              e.preventDefault();
              event1Button();
          });

          $(mainSel + btn2Sel).click(function(e) {
              e.preventDefault();
              openMsgModal();
          });

        */

          $(mesgSel + btn1Sel).click(function(e) {
              e.preventDefault();
              event1Button();
          });



      });
    </script>

</body>
</html>